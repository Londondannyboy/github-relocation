---
import Layout from '../layouts/Layout.astro';
import { sanityClient } from '../lib/sanity';

// Fetch recent posts
const recentPosts = await sanityClient.fetch(`
  *[_type == "post"] | order(publishedAt desc) [0...3] {
    _id,
    title,
    slug,
    excerpt,
    category-> {
      title
    }
  }
`);
---

<Layout title="Relocation Quest - Your Guide to Global Living">
	<main class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
		<div class="container mx-auto px-4 py-16">
			<h1 class="text-5xl font-bold text-center text-blue-900 mb-4">
				Welcome to Relocation Quest
			</h1>
			<p class="text-xl text-center text-gray-700 mb-8">
				Your comprehensive guide to international relocation, visas, and global living
			</p>
			
			<div class="bg-white rounded-lg shadow-lg p-8 max-w-4xl mx-auto">
				<h2 class="text-2xl font-semibold mb-4 text-gray-800">Fresh Start Configuration âœ…</h2>
				
				<div class="grid md:grid-cols-2 gap-6">
					<div class="space-y-3">
						<h3 class="font-semibold text-lg text-blue-700">Technology Stack</h3>
						<ul class="space-y-2 text-gray-600">
							<li>âœ… Astro + React + TypeScript</li>
							<li>âœ… Tailwind CSS</li>
							<li>âœ… Sanity CMS Integration</li>
							<li>âœ… Flux Pro Images (Ready)</li>
							<li>âœ… MUX Video (Optional)</li>
						</ul>
					</div>
					
					<div class="space-y-3">
						<h3 class="font-semibold text-lg text-blue-700">Project Setup</h3>
						<ul class="space-y-2 text-gray-600">
							<li>âœ… Proper favicon configured</li>
							<li>âœ… Schema.org metadata</li>
							<li>âœ… SEO-ready structure</li>
							<li>âœ… Post schema (not article)</li>
							<li>âœ… Vercel deployment ready</li>
						</ul>
					</div>
				</div>
				
				<div class="mt-8 p-4 bg-green-50 rounded-lg border border-green-200">
					<p class="text-green-800 font-medium">
						ðŸš€ Ready for content generation with smart caching and Flux Pro images!
					</p>
				</div>
			</div>
			
			{recentPosts.length > 0 && (
				<div class="mt-12 max-w-4xl mx-auto">
					<h2 class="text-2xl font-semibold mb-6 text-center text-gray-800">Recent Articles</h2>
					<div class="grid gap-6">
						{recentPosts.map(post => (
							<a href={`/posts/${post.slug.current}`} class="bg-white rounded-lg p-6 shadow hover:shadow-lg transition-shadow">
								<div class="flex justify-between items-start">
									<div>
										<h3 class="text-xl font-semibold text-blue-700 mb-2">{post.title}</h3>
										{post.excerpt && (
											<p class="text-gray-600">{post.excerpt}</p>
										)}
									</div>
									{post.category && (
										<span class="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full">
											{post.category.title}
										</span>
									)}
								</div>
							</a>
						))}
					</div>
				</div>
			)}
			
			<div class="mt-8 text-center">
				<a href="/posts" class="inline-block bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
					View All Articles â†’
				</a>
			</div>
			
			<div class="mt-12 text-center">
				<h3 class="text-lg text-gray-600 mb-2">Deployment Status</h3>
				<p class="text-sm text-gray-500">
					GitHub: github-relocation | Vercel: vercel-relocation | Production: relocation.quest
				</p>
			</div>
		</div>
	</main>
</Layout>
